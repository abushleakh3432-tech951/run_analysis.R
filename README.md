# run_analysis.R
# Checking if folder exists > if (!file.exists("UCI HAR Dataset")) {  +   unzip(filename)  + } >  > library(dplyr) > filename &lt;- "Coursera_DS3_Final.zip" > # Checking if archieve already exists. > if (!file.exists(filename)){ +   fileURL &lt;- "https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip" +   download.file(fileURL, filename) + } > # Checking if folder exists > if (!file.exists("UCI HAR Dataset")) {  +   unzip(filename)  + } > features &lt;- read.table("UCI HAR Dataset/features.txt", col.names = c("n","functions")) > activities &lt;- read.table("UCI HAR Dataset/activity_labels.txt", col.names = c("code", "activity")) > subject_test &lt;- read.table("UCI HAR Dataset/test/subject_test.txt", col.names = "subject") > x_test &lt;- read.table("UCI HAR Dataset/test/X_test.txt", col.names = features$functions) > y_test &lt;- read.table("UCI HAR Dataset/test/y_test.txt", col.names = "code") > subject_train &lt;- read.table("UCI HAR Dataset/train/subject_train.txt", col.names = "subject") > x_train &lt;- read.table("UCI HAR Dataset/train/X_train.txt", col.names = features$functions) > y_train &lt;- read.table("UCI HAR Dataset/train/y_train.txt", col.names = "code") >  > X &lt;- rbind(x_train, x_test) > Y &lt;- rbind(y_train, y_test) > Subject &lt;- rbind(subject_train, subject_test) > Merged_Data &lt;- cbind(Subject, Y, X) >  > TidyData &lt;- Merged_Data %>% select(subject, code, contains("mean"), contains("std")) >  > TidyData$code &lt;- activities[TidyData$code, 2] >  > names(TidyData)[2] = "activity" > names(TidyData)&lt;-gsub("Acc", "Accelerometer", names(TidyData)) > names(TidyData)&lt;-gsub("Gyro", "Gyroscope", names(TidyData)) > names(TidyData)&lt;-gsub("BodyBody", "Body", names(TidyData)) > names(TidyData)&lt;-gsub("Mag", "Magnitude", names(TidyData)) > names(TidyData)&lt;-gsub("^t", "Time", names(TidyData)) > names(TidyData)&lt;-gsub("^f", "Frequency", names(TidyData)) > names(TidyData)&lt;-gsub("tBody", "TimeBody", names(TidyData)) > names(TidyData)&lt;-gsub("-mean()", "Mean", names(TidyData), ignore.case = TRUE) > names(TidyData)&lt;-gsub("-std()", "STD", names(TidyData), ignore.case = TRUE) > names(TidyData)&lt;-gsub("-freq()", "Frequency", names(TidyData), ignore.case = TRUE) > names(TidyData)&lt;-gsub("angle", "Angle", names(TidyData)) > names(TidyData)&lt;-gsub("gravity", "Gravity", names(TidyData)) >  > FinalData &lt;- TidyData %>% +     group_by(subject, activity) %>% +     summarise_all(funs(mean)) Warning message: funs() is soft deprecated as of dplyr 0.8.0 Please use a list of either functions or lambdas:     # Simple named list:    list(mean = mean, median = median)    # Auto named with `tibble::lst()`:    tibble::lst(mean, median)    # Using lambdas   list(~ mean(., trim = .2), ~ median(., na.rm = TRUE)) This warning is displayed once per session.  > write.table(FinalData, "FinalData.txt", row.name=FALSE)
